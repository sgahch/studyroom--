[{"C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\main.ts":"1","C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\App.vue":"2","C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\router\\index.ts":"3","C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\views\\Login.vue":"4"},{"size":158,"mtime":1745563392508,"results":"5","hashOfConfig":"6"},{"size":352,"mtime":1745563405954,"results":"7","hashOfConfig":"6"},{"size":643,"mtime":1745563503958,"results":"8","hashOfConfig":"6"},{"size":5958,"mtime":1745569812626,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"2kv2zz",{"filePath":"12","messages":"13","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},"C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\main.ts",[],"C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\App.vue",[],"C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\router\\index.ts",[],"C:\\Users\\Ynchen\\Desktop\\软件应用与开发 胡淇_参赛总文件夹\\胡淇_素材与源码\\studyroom\\frontend\\src\\views\\Login.vue",["19","20"],"<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <h1 class=\"login-title\">自习室预约系统</h1>\r\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">\r\n            <i class=\"fas fa-user\"></i>\r\n            用户名\r\n          </label>\r\n          <input\r\n            id=\"username\"\r\n            v-model=\"username\"\r\n            type=\"text\"\r\n            required\r\n            placeholder=\"请输入用户名\"\r\n            :disabled=\"loading\"\r\n          />\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"password\">\r\n            <i class=\"fas fa-lock\"></i>\r\n            密码\r\n          </label>\r\n          <input\r\n            id=\"password\"\r\n            v-model=\"password\"\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"请输入密码\"\r\n            :disabled=\"loading\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"error\" class=\"error-message\">\r\n          <i class=\"fas fa-exclamation-circle\"></i>\r\n          {{ error }}\r\n        </div>\r\n\r\n        <button type=\"submit\" :disabled=\"loading\" class=\"login-button\">\r\n          <i v-if=\"loading\" class=\"fas fa-spinner fa-spin\"></i>\r\n          <span v-else>登录</span>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport axios, { AxiosError, AxiosResponse } from 'axios'\r\n\r\ninterface LoginResponse {\r\n  token: string\r\n  user: {\r\n    id: number\r\n    username: string\r\n    [key: string]: any\r\n  }\r\n}\r\n\r\ninterface ErrorResponse {\r\n  message: string\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'LoginView',\r\n  setup() {\r\n    const router = useRouter()\r\n    const username = ref('')\r\n    const password = ref('')\r\n    const loading = ref(false)\r\n    const error = ref('')\r\n\r\n    onMounted(() => {\r\n      // 添加 Font Awesome CDN\r\n      const link = document.createElement('link')\r\n      link.rel = 'stylesheet'\r\n      link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css'\r\n      document.head.appendChild(link)\r\n    })\r\n\r\n    const handleLogin = async () => {\r\n      loading.value = true\r\n      error.value = ''\r\n      \r\n      try {\r\n        const response = await axios.post<LoginResponse>('http://localhost:8000/api/login/', {\r\n          username: username.value,\r\n          password: password.value,\r\n        })\r\n\r\n        if (response.data) {\r\n          localStorage.setItem('token', response.data.token)\r\n          localStorage.setItem('user', JSON.stringify(response.data.user))\r\n          router.push('/home')\r\n        }\r\n      } catch (e) {\r\n        const err = e as AxiosError<ErrorResponse>\r\n        if (axios.isAxiosError(err)) {\r\n          if (!err.response) {\r\n            error.value = '无法连接到服务器，请确保后端服务已启动'\r\n          } else if (err.response.status === 401) {\r\n            error.value = '用户名或密码错误'\r\n          } else if (err.response.status === 500) {\r\n            error.value = '服务器内部错误'\r\n          } else {\r\n            error.value = err.response.data?.message || '登录失败，请稍后重试'\r\n          }\r\n        } else {\r\n          error.value = '发生未知错误'\r\n        }\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    return {\r\n      username,\r\n      password,\r\n      loading,\r\n      error,\r\n      handleLogin\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);\r\n  padding: 20px;\r\n}\r\n\r\n.login-card {\r\n  background: white;\r\n  padding: 40px;\r\n  border-radius: var(--border-radius-large);\r\n  box-shadow: var(--box-shadow-base);\r\n  width: 100%;\r\n  max-width: 400px;\r\n}\r\n\r\n.login-title {\r\n  text-align: center;\r\n  color: var(--color-primary);\r\n  margin-bottom: 30px;\r\n  font-size: var(--font-size-extra-large);\r\n}\r\n\r\n.login-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n\r\n  label {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    color: var(--text-color-regular);\r\n    font-size: var(--font-size-base);\r\n\r\n    i {\r\n      color: var(--color-primary);\r\n    }\r\n  }\r\n\r\n  input {\r\n    padding: 12px;\r\n    border: 1px solid var(--border-color-base);\r\n    border-radius: var(--border-radius-base);\r\n    font-size: var(--font-size-base);\r\n    transition: all 0.3s ease;\r\n\r\n    &:focus {\r\n      outline: none;\r\n      border-color: var(--color-primary);\r\n      box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.1);\r\n    }\r\n\r\n    &:disabled {\r\n      background-color: var(--background-color-light);\r\n      cursor: not-allowed;\r\n    }\r\n  }\r\n}\r\n\r\n.error-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px;\r\n  background-color: var(--color-danger-light);\r\n  color: var(--color-danger);\r\n  border-radius: var(--border-radius-base);\r\n  font-size: var(--font-size-base);\r\n\r\n  i {\r\n    font-size: var(--font-size-large);\r\n  }\r\n}\r\n\r\n.login-button {\r\n  padding: 12px;\r\n  background-color: var(--color-primary);\r\n  color: white;\r\n  border: none;\r\n  border-radius: var(--border-radius-base);\r\n  font-size: var(--font-size-base);\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n\r\n  &:hover:not(:disabled) {\r\n    background-color: var(--color-primary-dark);\r\n  }\r\n\r\n  &:disabled {\r\n    background-color: var(--color-primary-light);\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  i {\r\n    font-size: var(--font-size-base);\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .login-card {\r\n    padding: 20px;\r\n  }\r\n}\r\n</style> ",{"ruleId":"21","severity":1,"message":"22","line":53,"column":29,"nodeType":"23","messageId":"24","endLine":53,"endColumn":42},{"ruleId":"25","severity":1,"message":"26","line":60,"column":20,"nodeType":"27","messageId":"28","endLine":60,"endColumn":23,"suggestions":"29"},"@typescript-eslint/no-unused-vars","'AxiosResponse' is defined but never used.","Identifier","unusedVar","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["30","31"],{"messageId":"32","fix":"33","desc":"34"},{"messageId":"35","fix":"36","desc":"37"},"suggestUnknown",{"range":"38","text":"39"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"38","text":"40"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",[1604,1607],"unknown","never"]